<?php
session_start();
define('BASEPATH', true);
$title = 'Do It 4 Vendée - Mes informations';
require('assets/template/header.php');
require('assets/template/head.php');
include('assets/constante.php');
?>
<section id="legalPage">
    <h2 class="titlePage">
        Mes informations
    </h2>
    <div id="profilePhotoEditContainer">
        <div id="profilePhotoContainer">
            <div id="profilePic">
                <?php if(isset($_SESSION['googleImage'])){
                    echo '<img width="90" height="90" style="border-radius:6px" src="'.$_SESSION['googleImage'].'" alt="Photo de profil google">';
                }else{
                    echo '<span id="firstLetterName">'.mb_substr($_SESSION['firstName'], 0, 1, "UTF-8") .' '. mb_substr($_SESSION['lastName'], 0, 1, "UTF-8").'</span>';
                } ?>
            </div>
            <div class="svgContainer" onclick='errorModal("error", "Oops...", "Cette option est temporairement indisponible", "Ok", "")'>
                <svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.5 6.24998C6.46447 6.24998 5.625 7.08945 5.625 8.12498C5.625 9.16052 6.46447 9.99998 7.5 9.99998C8.53553 9.99998 9.375 9.16052 9.375 8.12498C9.375 7.08945 8.53553 6.24998 7.5 6.24998Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7.5 15C1.32375 15 0 13.9115 0 8.46937C0 4.93221 0 2.14285 2.81235 2.14285C4.30683 2.14285 4.38958 1.5378 4.46713 0.970707C4.53552 0.470581 4.59988 -1.33014e-05 5.625 2.81978e-10L9.375 2.02786e-05C10.4001 1.07806e-05 10.4644 0.470601 10.5328 0.970721C10.6103 1.5378 10.693 2.14285 12.1875 2.14285C15 2.14285 15 5.00158 15 8.46937C15 13.8473 13.6762 15 7.5 15ZM10.625 4.99998C10.625 5.34516 10.9048 5.62498 11.25 5.62498C11.5952 5.62498 11.875 5.34516 11.875 4.99998C11.875 4.65481 11.5952 4.37498 11.25 4.37498C10.9048 4.37498 10.625 4.65481 10.625 4.99998ZM7.5 4.99998C5.77411 4.99998 4.375 6.39909 4.375 8.12498C4.375 9.85087 5.77411 11.25 7.5 11.25C9.22589 11.25 10.625 9.85087 10.625 8.12498C10.625 6.39909 9.22589 4.99998 7.5 4.99998Z" fill="black"/></svg>
            </div>
        </div>
    </div>
    <hr style="margin-bottom: 20px;">
    <form method="POST" action="register.php">
        <div class="inputModuleContainer">
            <span class="titleInputModule">Nom</span><br/>
            <input name="lastName" id="lastName" type="text" class="inputModule" value="<?=$_SESSION['lastName']?>">
        </div>
        <div class="inputModuleContainer">
            <span class="titleInputModule">Prénom</span><br/>
            <input name="firstName" id="firstName" type="text" class="inputModule" value="<?=$_SESSION['firstName']?>">
        </div>
        <div class="inputModuleContainer">
            <span class="titleInputModule">Email</span><br/>
            <input disabled name="email" id="email" type="email" class="inputModule" value="<?=$_SESSION['email']?>">
        </div>
        <?php
        $query = $PDO->prepare("SELECT idClientGoogle FROM users WHERE idClientGoogle = :idClient");
        $query->bindValue(':idClient', $_SESSION['idClient']);
        $query->execute();       
        $row = $query->fetch(PDO::FETCH_ASSOC);
        if($row['idClientGoogle'] == null){
        ?>
        <div class="inputModuleContainer">
            <span class="titleInputModule">Mot de passe</span>
            <input name="pass" id="pass" type="password" class="inputModule" id="passwordInput" value="password">
        </div>
        <span id="changePassword" onclick="changePassword();">Changer mon mot de passe</span>
        <div id="newPassContainer">
            <div class="inputModuleContainer" id="newPass">
                <span class="titleInputModule">Nouveau mot de passe</span>
                <div id="passwordContainer">
                    <input name="pass" type="password" class="inputModule" id="passwordInput1">
                    <div>
                        <svg onclick="togglePassword(1)" id="eyeOpen1" class="togglePassword" width="20" height="12" viewBox="0 0 12 7" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 1.45833C5.77919 1.46135 5.56002 1.49205 5.34917 1.54948C5.4467 1.69956 5.49863 1.86902 5.5 2.04167C5.5 2.17572 5.46982 2.30847 5.41119 2.43232C5.35256 2.55618 5.26662 2.66871 5.15829 2.7635C5.04995 2.8583 4.92134 2.93349 4.77979 2.98479C4.63825 3.0361 4.48654 3.0625 4.33333 3.0625C4.13602 3.0613 3.94235 3.01586 3.77083 2.93052C3.6355 3.34119 3.65127 3.7787 3.81591 4.18109C3.98055 4.58347 4.28571 4.93033 4.68816 5.17253C5.09061 5.41474 5.56995 5.54 6.05828 5.53059C6.54662 5.52118 7.01919 5.37756 7.40906 5.12008C7.79893 4.8626 8.08633 4.50432 8.23056 4.09598C8.37478 3.68764 8.36852 3.24994 8.21265 2.84489C8.05678 2.43984 7.75922 2.08797 7.3621 1.83911C6.96499 1.59026 6.48845 1.45704 6 1.45833V1.45833ZM11.9275 3.23385C10.7977 1.30503 8.56105 0 6 0C3.43895 0 1.20166 1.30594 0.0724887 3.23404C0.0248307 3.31653 0 3.40766 0 3.50009C0 3.59252 0.0248307 3.68366 0.0724887 3.76615C1.20228 5.69497 3.43895 7 6 7C8.56105 7 10.7983 5.69406 11.9275 3.76596C11.9752 3.68347 12 3.59234 12 3.49991C12 3.40748 11.9752 3.31634 11.9275 3.23385V3.23385ZM6 6.125C3.94479 6.125 2.06062 5.1224 1.04312 3.5C2.06062 1.8776 3.94458 0.875 6 0.875C8.05542 0.875 9.93938 1.8776 10.9569 3.5C9.93959 5.1224 8.05542 6.125 6 6.125Z" fill="var(--grey-color)"/></svg>
                        <svg onclick="togglePassword(1)" id="eyeClose1" class="togglePassword hideElement" width="20" height="16" viewBox="0 0 20 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M19.8122 14.7068L1.12527 0.109599C1.07402 0.068594 1.01518 0.0380782 0.952123 0.0197938C0.889065 0.0015094 0.823021 -0.00418553 0.75776 0.00303418C0.6925 0.0102539 0.629302 0.0302469 0.571775 0.0618716C0.514247 0.0934963 0.463517 0.136133 0.42248 0.187348L0.10999 0.577345C0.0688564 0.628578 0.0382372 0.687412 0.0198841 0.750482C0.00153093 0.813552 -0.00419592 0.879618 0.0030312 0.944902C0.0102583 1.01019 0.0302976 1.0734 0.0620023 1.13094C0.093707 1.18848 0.136455 1.2392 0.1878 1.28021L18.8747 15.8775C18.926 15.9185 18.9848 15.949 19.0479 15.9673C19.1109 15.9855 19.177 15.9912 19.2422 15.984C19.3075 15.9768 19.3707 15.9568 19.4282 15.9252C19.4858 15.8936 19.5365 15.8509 19.5775 15.7997L19.89 15.4097C19.9311 15.3585 19.9618 15.2996 19.9801 15.2366C19.9985 15.1735 20.0042 15.1074 19.997 15.0422C19.9897 14.9769 19.9697 14.9137 19.938 14.8561C19.9063 14.7986 19.8635 14.7479 19.8122 14.7068V14.7068ZM9.27471 4.57348L13.4868 7.86395C13.4174 5.99234 11.8899 4.49636 10 4.49636C9.75621 4.49682 9.51313 4.52266 9.27471 4.57348ZM10.7253 11.4139L6.51323 8.12342C6.58292 9.99472 8.11037 11.4907 10 11.4907C10.2438 11.4902 10.4868 11.4644 10.7253 11.4139V11.4139ZM10 3.49717C13.0827 3.49717 15.9089 5.21453 17.4351 7.99353C17.061 8.67746 16.5987 9.30943 16.0601 9.87326L17.2395 10.7944C17.8961 10.0925 18.4524 9.30327 18.8925 8.4491C18.964 8.3078 19.0013 8.15169 19.0013 7.99337C19.0013 7.83505 18.964 7.67894 18.8925 7.53765C17.1963 4.23376 13.8414 1.99838 10 1.99838C8.85316 1.99838 7.75913 2.21696 6.73041 2.58572L8.18068 3.71886C8.77254 3.5846 9.37877 3.49717 10 3.49717ZM10 12.4899C6.91728 12.4899 4.09143 10.7725 2.56491 7.99353C2.93952 7.3096 3.40231 6.67773 3.94144 6.11411L2.7621 5.19298C2.1056 5.89475 1.54941 6.68389 1.10933 7.53796C1.03785 7.67925 1.0006 7.83536 1.0006 7.99368C1.0006 8.15201 1.03785 8.30811 1.10933 8.44941C2.80397 11.7533 6.15887 13.9887 10 13.9887C11.1468 13.9887 12.2409 13.7685 13.2696 13.4013L11.8193 12.2685C11.2275 12.4025 10.6215 12.4899 10 12.4899Z" fill="var(--grey-color)"/></svg>
                    </div>
                </div>
            </div>
            <div class="inputModuleContainer" id="passConfirm">
                <span class="titleInputModule">Confirmation du mot de passe</span>
                <div id="passwordContainer">
                    <input name="pass" type="password" class="inputModule" id="passwordInput2">
                    <div>
                        <svg onclick="togglePassword(2)" id="eyeOpen2" class="togglePassword" width="20" height="12" viewBox="0 0 12 7" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 1.45833C5.77919 1.46135 5.56002 1.49205 5.34917 1.54948C5.4467 1.69956 5.49863 1.86902 5.5 2.04167C5.5 2.17572 5.46982 2.30847 5.41119 2.43232C5.35256 2.55618 5.26662 2.66871 5.15829 2.7635C5.04995 2.8583 4.92134 2.93349 4.77979 2.98479C4.63825 3.0361 4.48654 3.0625 4.33333 3.0625C4.13602 3.0613 3.94235 3.01586 3.77083 2.93052C3.6355 3.34119 3.65127 3.7787 3.81591 4.18109C3.98055 4.58347 4.28571 4.93033 4.68816 5.17253C5.09061 5.41474 5.56995 5.54 6.05828 5.53059C6.54662 5.52118 7.01919 5.37756 7.40906 5.12008C7.79893 4.8626 8.08633 4.50432 8.23056 4.09598C8.37478 3.68764 8.36852 3.24994 8.21265 2.84489C8.05678 2.43984 7.75922 2.08797 7.3621 1.83911C6.96499 1.59026 6.48845 1.45704 6 1.45833V1.45833ZM11.9275 3.23385C10.7977 1.30503 8.56105 0 6 0C3.43895 0 1.20166 1.30594 0.0724887 3.23404C0.0248307 3.31653 0 3.40766 0 3.50009C0 3.59252 0.0248307 3.68366 0.0724887 3.76615C1.20228 5.69497 3.43895 7 6 7C8.56105 7 10.7983 5.69406 11.9275 3.76596C11.9752 3.68347 12 3.59234 12 3.49991C12 3.40748 11.9752 3.31634 11.9275 3.23385V3.23385ZM6 6.125C3.94479 6.125 2.06062 5.1224 1.04312 3.5C2.06062 1.8776 3.94458 0.875 6 0.875C8.05542 0.875 9.93938 1.8776 10.9569 3.5C9.93959 5.1224 8.05542 6.125 6 6.125Z" fill="var(--grey-color)"/></svg>
                        <svg onclick="togglePassword(2)" id="eyeClose2" class="togglePassword hideElement" width="20" height="16" viewBox="0 0 20 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M19.8122 14.7068L1.12527 0.109599C1.07402 0.068594 1.01518 0.0380782 0.952123 0.0197938C0.889065 0.0015094 0.823021 -0.00418553 0.75776 0.00303418C0.6925 0.0102539 0.629302 0.0302469 0.571775 0.0618716C0.514247 0.0934963 0.463517 0.136133 0.42248 0.187348L0.10999 0.577345C0.0688564 0.628578 0.0382372 0.687412 0.0198841 0.750482C0.00153093 0.813552 -0.00419592 0.879618 0.0030312 0.944902C0.0102583 1.01019 0.0302976 1.0734 0.0620023 1.13094C0.093707 1.18848 0.136455 1.2392 0.1878 1.28021L18.8747 15.8775C18.926 15.9185 18.9848 15.949 19.0479 15.9673C19.1109 15.9855 19.177 15.9912 19.2422 15.984C19.3075 15.9768 19.3707 15.9568 19.4282 15.9252C19.4858 15.8936 19.5365 15.8509 19.5775 15.7997L19.89 15.4097C19.9311 15.3585 19.9618 15.2996 19.9801 15.2366C19.9985 15.1735 20.0042 15.1074 19.997 15.0422C19.9897 14.9769 19.9697 14.9137 19.938 14.8561C19.9063 14.7986 19.8635 14.7479 19.8122 14.7068V14.7068ZM9.27471 4.57348L13.4868 7.86395C13.4174 5.99234 11.8899 4.49636 10 4.49636C9.75621 4.49682 9.51313 4.52266 9.27471 4.57348ZM10.7253 11.4139L6.51323 8.12342C6.58292 9.99472 8.11037 11.4907 10 11.4907C10.2438 11.4902 10.4868 11.4644 10.7253 11.4139V11.4139ZM10 3.49717C13.0827 3.49717 15.9089 5.21453 17.4351 7.99353C17.061 8.67746 16.5987 9.30943 16.0601 9.87326L17.2395 10.7944C17.8961 10.0925 18.4524 9.30327 18.8925 8.4491C18.964 8.3078 19.0013 8.15169 19.0013 7.99337C19.0013 7.83505 18.964 7.67894 18.8925 7.53765C17.1963 4.23376 13.8414 1.99838 10 1.99838C8.85316 1.99838 7.75913 2.21696 6.73041 2.58572L8.18068 3.71886C8.77254 3.5846 9.37877 3.49717 10 3.49717ZM10 12.4899C6.91728 12.4899 4.09143 10.7725 2.56491 7.99353C2.93952 7.3096 3.40231 6.67773 3.94144 6.11411L2.7621 5.19298C2.1056 5.89475 1.54941 6.68389 1.10933 7.53796C1.03785 7.67925 1.0006 7.83536 1.0006 7.99368C1.0006 8.15201 1.03785 8.30811 1.10933 8.44941C2.80397 11.7533 6.15887 13.9887 10 13.9887C11.1468 13.9887 12.2409 13.7685 13.2696 13.4013L11.8193 12.2685C11.2275 12.4025 10.6215 12.4899 10 12.4899Z" fill="var(--grey-color)"/></svg>
                    </div>
                </div>
            </div>
        </div>
        <?php } ?>
        <div class="userDataButton" id="buyButtonContainer">
            <input type="button" value="Retour" class="buttonBottom" onclick="history.go(-1)">
            <input type="button" value="Enregistrer" class="buttonBottom" onclick="saveUserData();">
        </div>
    </form>
</section>

<?php require('assets/template/footer.php'); ?>